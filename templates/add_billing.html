{% extends "base.html" %}

{% block title %}Add Billing{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h2>Add Billing Record</h2>
    </div>
    <div class="card-body">
        <form method="post">
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label class="form-label">Patient</label>
                    <select name="patient_id" class="form-select" required>
                        <option value="" selected disabled>Select Patient</option>
                        {% for p in patients %}
                        <option value="{{ p.patient_id }}">{{ p.first_name }} {{ p.last_name }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Appointment</label>
                    <select name="appointment_id" class="form-select">
                        <option value="">None</option>
                        {% for a in appointments %}
                        <option value="{{ a.appointment_id }}">
                            {{ a.appointment_date }} {{ a.appointment_time }} (ID: {{ a.appointment_id }})
                        </option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Total Amount</label>
                    <div class="input-group">
                        <span class="input-group-text">$</span>
                        <input type="number" step="0.01" name="total_amount" class="form-control" required>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Paid Amount</label>
                    <div class="input-group">
                        <span class="input-group-text">$</span>
                        <input type="number" step="0.01" name="paid_amount" class="form-control" value="0">
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <label class="form-label">Billing Date</label>
                    <input type="date" name="billing_date" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Due Date</label>
                    <input type="date" name="due_date" class="form-control" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Status</label>
                    <select name="status" class="form-select">
                        <option value="Unpaid" selected>Unpaid</option>
                        <option value="Paid">Paid</option>
                        <option value="Partial">Partial</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <label class="form-label">Payment Method</label>
                    <select name="payment_method" class="form-select">
                        <option value="">Select Method</option>
                        <option value="Cash">Cash</option>
                        <option value="Credit Card">Credit Card</option>
                        <option value="Insurance">Insurance</option>
                        <option value="Bank Transfer">Bank Transfer</option>
                    </select>
                </div>
                <div class="col-md-6 mb-3">
                    <div class="form-check pt-4">
                        <input type="checkbox" name="insurance_claim" class="form-check-input" id="insuranceCheck">
                        <label class="form-check-label" for="insuranceCheck">Insurance Claim</label>
                    </div>
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-primary">Add Billing Record</button>
                    <a href="/billing" class="btn btn-secondary">Cancel</a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}